#!/bin/bash

function log {
    echo "> ${@}"
}

log "generating proto shizzles"
protoc --proto_path=./ -I../golpje/ --go_out=golpje golpje.proto

log "Inserting storm shizzles"
protoc-go-inject-tag -input=./golpje/golpje.pb.go &> /dev/null

log "updating dependencies"
go get -d .

log "building"
mkdir -p dist
go build -o dist/golpje *.go

log "starting"
echo '---------------------------------'
echo
dist/golpje ${@}
